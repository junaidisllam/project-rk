import{d as O,H as Q,z as R,r as f,u as A,x as Y,s as G,c as E,w as W,b as e,n as C,g as x,h as v,i as s,e as a,f as n,o,l as j,m as w,v as g,t as u,F as J,j as X,E as P,q as B}from"./app-CRBo5Voe.js";import{_ as Z}from"./AppLayout.vue_vue_type_style_index_0_lang-C-6xvEXV.js";import{U as ee}from"./Heading-DtnxNrzF.js";import{L as te}from"./lock-aEEwqRyI.js";import{S as $}from"./shield-check-Co63BVcJ.js";import{c as T}from"./createLucideIcon-D5TOW6Nr.js";import{C as se,_ as oe}from"./_plugin-vue_export-helper-DrTGjmaW.js";import{L as le}from"./loader-circle-CBJGsedg.js";import{C as ae,a as re}from"./copy-BTBMR_sr.js";const ne=T("KeyIcon",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);const de=T("ShieldAlertIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const ie=T("ShieldIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),ue={class:"min-h-screen bg-slate-50 pb-20 font-sans md:pb-10"},ce={class:"mx-auto mt-6 max-w-3xl px-4 sm:px-6 lg:px-8"},be={class:"scrollbar-hide mb-6 flex gap-2 overflow-x-auto pb-2"},xe={class:"transition-all duration-300"},pe={key:0,class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-100"},me={key:0,class:"mt-1 text-xs text-red-500"},fe={key:0,class:"mt-1 text-xs text-red-500"},we={class:"flex justify-end pt-4"},ge=["disabled"],he={key:1,class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-100"},ve={key:0,class:"mt-1 text-xs text-red-500"},ye={class:"grid gap-5 md:grid-cols-2"},ke={key:0,class:"mt-1 text-xs text-red-500"},Ce={class:"flex justify-end pt-4"},Fe=["disabled"],_e={key:2,class:"rounded-3xl bg-white p-6 shadow-sm ring-1 ring-slate-100"},Se={class:"flex items-center gap-4"},Ae={class:"flex h-12 w-12 items-center justify-center rounded-full bg-white shadow-sm"},Ee={class:"text-sm font-bold md:text-base"},je={class:"mt-0.5 text-xs opacity-80"},Pe={key:0},Te=["disabled"],Ve={key:0,class:"space-y-8"},Me={key:0,class:"rounded-2xl border border-slate-200 p-6 text-center"},Le={key:0,class:"flex justify-center py-8"},Ne={key:1,class:"mx-auto w-fit"},Ue=["innerHTML"],Ie={class:"mt-6"},Re={class:"flex items-center justify-center gap-2"},Be={class:"rounded-lg bg-slate-100 px-3 py-1.5 font-mono text-sm font-bold text-slate-700"},$e={class:"mt-8 border-t border-slate-100 pt-6"},qe={class:"flex gap-2"},ze=["disabled"],De={key:0,class:"mt-2 text-xs text-red-500"},He={key:1},Ke={class:"rounded-2xl bg-slate-50 p-6 ring-1 ring-slate-200"},Oe={class:"mb-4 flex items-center justify-between"},Qe={class:"flex items-center gap-2 font-bold text-slate-800"},Ye={class:"grid grid-cols-2 gap-3 sm:grid-cols-4"},Ge={class:"flex flex-col gap-3 pt-4 sm:flex-row"},We=["disabled"],Je={key:1,class:"py-6 text-center"},Xe={class:"mb-4 inline-flex h-16 w-16 items-center justify-center rounded-full bg-slate-50"},Ze=["disabled"],et=O({__name:"Index",props:{twoFactorEnabled:Boolean,twoFactorConfirmed:Boolean},setup(i){const F=i,V=Q(),M=R(()=>V.props.auth.user),c=f("profile"),y=f(!1),_=f(!1),m=f(null),h=f([]),L=R(()=>V.props.auth.user?.two_factor_secret),S=f(!1),p=A({code:""}),d=A({name:M.value.name,email:M.value.email}),r=A({current_password:"",password:"",password_confirmation:""}),q=b=>{navigator.clipboard.writeText(b)},z=()=>{d.patch(route("profile.update"),{preserveScroll:!0})},D=()=>{r.patch(route("password.update"),{preserveScroll:!0,onSuccess:()=>r.reset()})},N=()=>(S.value=!0,P.get("/user/two-factor-qr-code").then(b=>{m.value=b.data.svg||b.data}).finally(()=>{S.value=!1})),k=()=>P.get("/user/two-factor-recovery-codes").then(b=>{h.value=b.data}),U=()=>{y.value=!0,B.post("/user/two-factor-authentication",{},{preserveScroll:!0,onSuccess:()=>Promise.all([N(),k()]),onFinish:()=>{y.value=!1}})},I=()=>{p.post("/user/confirmed-two-factor-authentication",{preserveScroll:!0,onSuccess:()=>{m.value=null,p.reset(),k()}})},H=()=>{P.post("/user/two-factor-recovery-codes").then(()=>{k()})},K=()=>{_.value=!0,B.delete("/user/two-factor-authentication",{preserveScroll:!0,onSuccess:()=>{_.value=!1,m.value=null}})};return Y(()=>{F.twoFactorEnabled&&!F.twoFactorConfirmed&&N()}),G(()=>F.twoFactorEnabled,b=>{b||(m.value=null,h.value=[],p.reset())}),(b,t)=>(o(),E(Z,null,{default:W(()=>[e("div",ue,[t[30]||(t[30]=e("div",{class:"bg-white shadow-sm"},[e("div",{class:"mx-auto max-w-3xl px-4 py-6 sm:px-6 lg:px-8"},[e("h1",{class:"text-2xl font-bold text-slate-900"}," Account Settings "),e("p",{class:"mt-1 text-sm text-slate-500"}," Manage your profile, security, and authentication. ")])],-1)),e("div",ce,[e("div",be,[e("button",{onClick:t[0]||(t[0]=l=>c.value="profile"),class:C(["flex items-center gap-2 rounded-full px-5 py-2.5 text-sm font-bold transition-all",c.value==="profile"?"bg-blue text-white shadow-lg shadow-blue/30":"bg-white text-slate-600 hover:bg-slate-100"])},[x(s(ee),{class:"h-4 w-4"}),t[11]||(t[11]=v(" Profile ",-1))],2),e("button",{onClick:t[1]||(t[1]=l=>c.value="security"),class:C(["flex items-center gap-2 rounded-full px-5 py-2.5 text-sm font-bold transition-all",c.value==="security"?"bg-blue text-white shadow-lg shadow-blue/30":"bg-white text-slate-600 hover:bg-slate-100"])},[x(s(te),{class:"h-4 w-4"}),t[12]||(t[12]=v(" Password ",-1))],2),e("button",{onClick:t[2]||(t[2]=l=>c.value="2fa"),class:C(["flex items-center gap-2 rounded-full px-5 py-2.5 text-sm font-bold transition-all",c.value==="2fa"?"bg-blue text-white shadow-lg shadow-blue/30":"bg-white text-slate-600 hover:bg-slate-100"])},[x(s($),{class:"h-4 w-4"}),t[13]||(t[13]=v(" 2FA Auth ",-1))],2)]),e("div",xe,[c.value==="profile"?(o(),a("div",pe,[t[16]||(t[16]=e("h2",{class:"mb-6 text-lg font-bold text-slate-800"}," Personal Information ",-1)),e("form",{onSubmit:j(z,["prevent"]),class:"space-y-5"},[e("div",null,[t[14]||(t[14]=e("label",{class:"mb-1.5 block text-xs font-bold tracking-wider text-slate-500 uppercase"},"Full Name",-1)),w(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>s(d).name=l),type:"text",class:"w-full rounded-xl border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium text-slate-900 focus:border-blue focus:bg-white focus:ring-0"},null,512),[[g,s(d).name]]),s(d).errors.name?(o(),a("p",me,u(s(d).errors.name),1)):n("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{class:"mb-1.5 block text-xs font-bold tracking-wider text-slate-500 uppercase"},"Email Address",-1)),w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>s(d).email=l),type:"email",class:"w-full rounded-xl border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium text-slate-900 focus:border-blue focus:bg-white focus:ring-0"},null,512),[[g,s(d).email]]),s(d).errors.email?(o(),a("p",fe,u(s(d).errors.email),1)):n("",!0)]),e("div",we,[e("button",{type:"submit",disabled:s(d).processing,class:"rounded-xl bg-blue px-8 py-3 text-sm font-bold text-white shadow-lg shadow-blue/30 transition hover:bg-blue-hover active:scale-95 disabled:opacity-70"},u(s(d).processing?"Saving...":"Save Changes"),9,ge)])],32)])):n("",!0),c.value==="security"?(o(),a("div",he,[t[20]||(t[20]=e("h2",{class:"mb-6 text-lg font-bold text-slate-800"}," Change Password ",-1)),e("form",{onSubmit:j(D,["prevent"]),class:"space-y-5"},[e("div",null,[t[17]||(t[17]=e("label",{class:"mb-1.5 block text-xs font-bold tracking-wider text-slate-500 uppercase"},"Current Password",-1)),w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>s(r).current_password=l),type:"password",class:"w-full rounded-xl border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium text-slate-900 focus:border-blue focus:bg-white focus:ring-0",placeholder:"••••••••"},null,512),[[g,s(r).current_password]]),s(r).errors.current_password?(o(),a("p",ve,u(s(r).errors.current_password),1)):n("",!0)]),e("div",ye,[e("div",null,[t[18]||(t[18]=e("label",{class:"mb-1.5 block text-xs font-bold tracking-wider text-slate-500 uppercase"},"New Password",-1)),w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>s(r).password=l),type:"password",class:"w-full rounded-xl border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium text-slate-900 focus:border-blue focus:bg-white focus:ring-0"},null,512),[[g,s(r).password]]),s(r).errors.password?(o(),a("p",ke,u(s(r).errors.password),1)):n("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{class:"mb-1.5 block text-xs font-bold tracking-wider text-slate-500 uppercase"},"Confirm New Password",-1)),w(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>s(r).password_confirmation=l),type:"password",class:"w-full rounded-xl border-slate-200 bg-slate-50 px-4 py-3 text-sm font-medium text-slate-900 focus:border-blue focus:bg-white focus:ring-0"},null,512),[[g,s(r).password_confirmation]])])]),e("div",Ce,[e("button",{type:"submit",disabled:s(r).processing,class:"rounded-xl bg-slate-900 px-8 py-3 text-sm font-bold text-white shadow-lg transition hover:bg-slate-800 active:scale-95 disabled:opacity-70"}," Update Password ",8,Fe)])],32)])):n("",!0),c.value==="2fa"?(o(),a("div",_e,[e("div",{class:C(["mb-8 flex items-center justify-between rounded-2xl p-5",i.twoFactorEnabled?"bg-green-50 text-green-800":"bg-slate-50 text-slate-800"])},[e("div",Se,[e("div",Ae,[i.twoFactorEnabled?(o(),E(s($),{key:0,class:"h-6 w-6 text-green-600"})):(o(),E(s(de),{key:1,class:"h-6 w-6 text-slate-400"}))]),e("div",null,[e("h3",Ee,u(i.twoFactorEnabled?"Two-Factor Authentication is ON":"Two-Factor Authentication is OFF"),1),e("p",je,u(i.twoFactorEnabled?"Your account is extra secure.":"Add extra security to your account."),1)])]),i.twoFactorEnabled?n("",!0):(o(),a("div",Pe,[e("button",{onClick:U,disabled:y.value,class:"flex h-10 w-10 items-center justify-center rounded-full bg-slate-900 text-white shadow-lg transition hover:bg-slate-800 active:scale-90"},[x(s(se),{class:"h-5 w-5"})],8,Te)]))],2),i.twoFactorEnabled?(o(),a("div",Ve,[i.twoFactorConfirmed?n("",!0):(o(),a("div",Me,[t[23]||(t[23]=e("h3",{class:"mb-4 font-bold text-slate-800"}," Finish Setup ",-1)),t[24]||(t[24]=e("p",{class:"mb-6 text-sm text-slate-500"}," Scan this QR code with your Authenticator App (Google/Microsoft Auth). ",-1)),S.value?(o(),a("div",Le,[x(s(le),{class:"h-10 w-10 animate-spin text-blue"})])):m.value?(o(),a("div",Ne,[e("div",{class:"rounded-xl border-4 border-white bg-white p-2 shadow-sm",innerHTML:m.value},null,8,Ue)])):n("",!0),e("div",Ie,[t[21]||(t[21]=e("p",{class:"mb-2 text-xs font-bold text-slate-400 uppercase"}," Or enter setup key ",-1)),e("div",Re,[e("code",Be,u(L.value),1),e("button",{onClick:t[8]||(t[8]=l=>q(L.value)),class:"rounded-lg p-2 text-slate-400 hover:bg-slate-50 hover:text-blue"},[x(s(ae),{class:"h-4 w-4"})])])]),e("div",$e,[e("form",{onSubmit:t[10]||(t[10]=j((...l)=>I&&I(...l),["prevent"])),class:"mx-auto max-w-sm"},[t[22]||(t[22]=e("label",{class:"mb-2 block text-sm font-bold text-slate-700"},"Enter Code from App",-1)),e("div",qe,[w(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>s(p).code=l),type:"text",inputmode:"numeric",class:"w-full rounded-xl border-slate-200 bg-white py-3 text-center text-lg font-bold tracking-widest text-slate-900 focus:border-blue focus:ring-blue",placeholder:"123 456"},null,512),[[g,s(p).code]]),e("button",{type:"submit",disabled:s(p).processing,class:"rounded-xl bg-blue px-6 font-bold text-white shadow-md hover:bg-blue-hover disabled:opacity-70"}," Confirm ",8,ze)]),s(p).errors.code?(o(),a("p",De,u(s(p).errors.code),1)):n("",!0)],32)])])),i.twoFactorConfirmed&&h.value.length>0?(o(),a("div",He,[e("div",Ke,[e("div",Oe,[e("h3",Qe,[x(s(ne),{class:"h-4 w-4 text-slate-500"}),t[25]||(t[25]=v(" Recovery Codes ",-1))]),e("button",{onClick:H,class:"text-xs font-bold text-blue hover:underline"}," Regenerate ")]),e("div",Ye,[(o(!0),a(J,null,X(h.value,l=>(o(),a("div",{key:l,class:"rounded-lg bg-white px-2 py-2 text-center font-mono text-xs font-bold text-slate-600 shadow-sm ring-1 ring-slate-100"},u(l),1))),128))]),t[26]||(t[26]=e("p",{class:"mt-4 text-xs text-slate-400"}," * Save these codes in a secure place. You can use them to login if you lose access to your phone. ",-1))])])):n("",!0),e("div",Ge,[i.twoFactorConfirmed&&h.value.length===0?(o(),a("button",{key:0,onClick:k,class:"flex flex-1 items-center justify-center gap-2 rounded-xl border border-slate-200 bg-white px-5 py-3 text-sm font-bold text-slate-700 transition hover:bg-slate-50"}," Show Recovery Codes ")):n("",!0),e("button",{onClick:K,disabled:_.value,class:"flex flex-1 items-center justify-center gap-2 rounded-xl border border-red-100 bg-red-50 px-5 py-3 text-sm font-bold text-red-600 transition hover:bg-red-100 hover:text-red-700 active:scale-[0.98]"},[x(s(re),{class:"h-4 w-4"}),t[27]||(t[27]=v(" Disable 2FA ",-1))],8,We)])])):(o(),a("div",Je,[e("div",Xe,[x(s(ie),{class:"h-8 w-8 text-slate-300"})]),t[28]||(t[28]=e("h3",{class:"mb-2 font-bold text-slate-900"}," Secure Your Account ",-1)),t[29]||(t[29]=e("p",{class:"mx-auto mb-6 max-w-sm text-sm text-slate-500"}," Enabling 2FA adds a significant layer of security. We highly recommend turning it on. ",-1)),e("button",{onClick:U,disabled:y.value,class:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-6 py-3 text-sm font-bold text-white shadow-lg transition-all hover:bg-slate-800 active:scale-95"}," Enable Now ",8,Ze)]))])):n("",!0)])])])]),_:1}))}}),ut=oe(et,[["__scopeId","data-v-85885aaa"]]);export{ut as default};
